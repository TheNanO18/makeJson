<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DB 연결 정보 입력</title>
</head>
<body>
    <h1>새로운 DB 연결 정보 입력</h1>

    {% if test_success %}
        <p style="color: green;">{{ test_success }}</p>
    {% endif %}
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <label>Host: <input type="text" name="host" value="{{ db_info.host|default:'localhost' }}" required></label><br>
        <label>Port: <input type="text" name="port" value="{{ db_info.port|default:'5432' }}" required></label><br>
        <label>Database Name: <input type="text" name="dbname" value="{{ db_info.dbname|default:'postgres' }}" required></label><br>
        <label>User: <input type="text" name="user" value="{{ db_info.user|default:'postgres' }}" required></label><br>
        <label>Password: <input type="password" name="password" value="" required></label><br><br>
        
        <button type="submit" name="action" value="test">연결 테스트</button>
        <button type="submit" name="action" value="save">저장하고 다음으로</button>
    </form>
</body>
</html>